<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blog - VendSmart Vending Solutions Jacksonville</title>
    <meta name="description" content="Stay updated with the latest vending industry insights, tips, and news from VendSmart. Expert advice on vending machines, micro-markets, and business solutions.">
    
    <!-- Main site CSS (minimal, just for header/footer) -->
    <link rel="stylesheet" href="styles.css?v=12.0">
    <!-- Blog-specific CSS (isolated) -->
    <link rel="stylesheet" href="blog-styles.css?v=1.0">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <!-- Contentful SDK -->
    <script src="https://unpkg.com/contentful@latest/dist/contentful.browser.min.js"></script>
</head>
<body>
    <!-- Contact Bar -->
    <div class="contact-bar">
        <div class="container">
            <div class="contact-info">
                <span class="contact-item">
                    <i class="fas fa-phone"></i>
                    904-456-3851
                </span>
                <span class="contact-item">
                    <i class="fas fa-envelope"></i>
                    vendsmartjacksonville@gmail.com
                </span>
                <a href="https://www.facebook.com/vendsmart" target="_blank" class="contact-item">
                    <i class="fab fa-facebook"></i>
                    Follow Us
                </a>
            </div>
        </div>
    </div>

    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <img src="VendSmart LOGO WITH BORDER.png" alt="VendSmart Logo">
            </div>
            <ul class="nav-menu">
                <li><a href="index.html">Home</a></li>
                <li><a href="services.html">Services</a></li>
                <li><a href="locations.html">Locations</a></li>
                <li><a href="portfolio.html">Portfolio</a></li>
                <li><a href="blog.html" class="active">Blog</a></li>
                <li><a href="contact.html" class="cta-button">Contact Us</a></li>
            </ul>
            <div class="hamburger">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero">
        <div class="hero-background">
            <img src="Miro Market.jpg" alt="VendSmart Micro-Market" class="hero-bg-image">
            <div class="hero-overlay"></div>
        </div>
        <div class="hero-container">
            <div class="hero-content">
                <h1>VendSmart Blog</h1>
                <p>Expert insights, industry trends, and practical tips for vending success</p>
                <div class="blog-stats">
                    <div class="stat">
                        <span class="stat-number" id="totalPosts">50+</span>
                        <span class="stat-label">Articles</span>
                    </div>
                    <div class="stat">
                        <span class="stat-number">10K+</span>
                        <span class="stat-label">Readers</span>
                    </div>
                    <div class="stat">
                        <span class="stat-number">24/7</span>
                        <span class="stat-label">Support</span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Blog Content -->
    <section class="blog-content">
        <div class="container">
            <!-- Featured Post (Contentful) -->
            <div class="featured-post" id="featuredPost" style="display: none;">
                <div class="featured-post-image">
                    <img id="featuredImage" src="" alt="">
                </div>
                <div class="featured-post-content">
                    <div class="post-meta">
                        <span class="category" id="featuredCategory">Featured</span>
                        <span class="date" id="featuredDate"></span>
                        <span class="read-time" id="featuredReadTime"></span>
                    </div>
                    <h2 id="featuredTitle"></h2>
                    <p id="featuredExcerpt"></p>
                    <a href="#" class="read-more-btn" id="featuredLink">Read Full Article <i class="fas fa-arrow-right"></i></a>
                </div>
            </div>

            <!-- Blog Categories -->
            <div class="blog-categories">
                <h3>Browse by Category</h3>
                <div class="category-filters" id="categoryFilters">
                    <button class="category-btn active" data-category="all">All Posts</button>
                    <!-- Categories will be populated by Contentful -->
                </div>
            </div>

            <!-- Blog Grid -->
            <div class="blog-grid" id="blogGrid">
                <!-- Posts will be populated by Contentful -->
                <div class="loading-posts">
                    <i class="fas fa-spinner fa-spin"></i>
                    <p>Loading blog posts...</p>
                </div>
            </div>

            <!-- Load More Button -->
            <div class="load-more-container" id="loadMoreContainer" style="display: none;">
                <button class="load-more-btn" id="loadMoreBtn">
                    <i class="fas fa-plus"></i>
                    Load More Articles
                </button>
            </div>

            <!-- Newsletter Signup -->
            <div class="newsletter-signup">
                <div class="newsletter-content">
                    <h3>Stay Updated</h3>
                    <p>Get the latest vending industry insights and tips delivered to your inbox.</p>
                    <form class="newsletter-form" id="newsletterForm">
                        <input type="email" placeholder="Enter your email address" required>
                        <button type="submit">Subscribe</button>
                    </form>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>VendSmart</h3>
                    <p>Premium vending solutions for Jacksonville and surrounding areas. 24/7 support, smart technology, and healthy options.</p>
                    <div class="social-links">
                        <a href="https://www.facebook.com/vendsmart" target="_blank"><i class="fab fa-facebook"></i></a>
                        <a href="#"><i class="fab fa-twitter"></i></a>
                        <a href="#"><i class="fab fa-linkedin"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                    </div>
                </div>
                <div class="footer-section">
                    <h3>Services</h3>
                    <ul>
                        <li><a href="services.html">Smart Vending Machines</a></li>
                        <li><a href="setting-up-a-micro-market-in-your-jacksonville-office.html">Micro-Markets</a></li>
                        <li><a href="coffeeservices.html">Coffee Services</a></li>
                        <li><a href="get-a-free-vending-machine-in-jacksonville-florida.html">Free Machine Program</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h3>Service Areas</h3>
                    <ul>
                        <li><a href="downtown-jacksonville.html">Downtown Jacksonville</a></li>
                        <li><a href="jacksonville-beach.html">Jacksonville Beach</a></li>
                        <li><a href="atlantic-beach.html">Atlantic Beach</a></li>
                        <li><a href="ponte-vedra.html">Ponte Vedra</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h3>Contact</h3>
                    <p><i class="fas fa-phone"></i> 904-456-3851</p>
                    <p><i class="fas fa-envelope"></i> vendsmartjacksonville@gmail.com</p>
                    <p><i class="fas fa-clock"></i> 24/7 Emergency Service</p>
                </div>
            </div>
        </div>
        <div class="footer-bottom">
            <div class="container">
                <p>&copy; 2024 VendSmart. All rights reserved. | <a href="#">Privacy Policy</a> | <a href="#">Terms of Service</a></p>
            </div>
        </div>
    </footer>

    <!-- Blog Script -->
    <script src="blog-script.js?v=2.0"></script>
    
    <!-- Contentful Integration Script -->
    <script>
        // Contentful Configuration
        const client = contentful.createClient({
            space: 'xpopyri6s8gv',
            accessToken: 'u7y4yBwgXnAUXt-c2B4rVuidEoe4L3AzMBzkNMxSXp0'
        });

        // Blog post template
        function createBlogPostHTML(post) {
            const category = post.fields.category || 'Uncategorized';
            const date = new Date(post.sys.createdAt).toLocaleDateString('en-US', {
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });
            const readTime = post.fields.readTime || '5 min read';
            
            return `
                <article class="blog-post" data-category="${category.toLowerCase().replace(/\s+/g, '-')}">
                    <div class="post-image">
                        <img src="${post.fields.featuredImage?.fields?.file?.url || 'https://images.unsplash.com/photo-1556742049-0cfed4f6a45d?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80'}" 
                             alt="${post.fields.title || 'Blog Post'}">
                    </div>
                    <div class="post-content">
                        <div class="post-meta">
                            <span class="category">${category}</span>
                            <span class="date">${date}</span>
                            <span class="read-time">${readTime}</span>
                        </div>
                        <h3>${post.fields.title || 'Untitled Post'}</h3>
                        <p>${post.fields.excerpt || 'No excerpt available.'}</p>
                        <a href="blog-post.html?id=${post.sys.id}" class="read-more">Read More <i class="fas fa-arrow-right"></i></a>
                    </div>
                </article>
            `;
        }

        // Featured post template
        function createFeaturedPostHTML(post) {
            const category = post.fields.category || 'Featured';
            const date = new Date(post.sys.createdAt).toLocaleDateString('en-US', {
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });
            const readTime = post.fields.readTime || '5 min read';
            
            return {
                image: post.fields.featuredImage?.fields?.file?.url || 'https://images.unsplash.com/photo-1556742049-0cfed4f6a45d?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&q=80',
                category: category,
                date: date,
                readTime: readTime,
                title: post.fields.title || 'Featured Post',
                excerpt: post.fields.excerpt || 'No excerpt available.',
                id: post.sys.id
            };
        }

        // Load blog posts from Contentful
        async function loadBlogPosts() {
            try {
                // Show loading state
                const blogGrid = document.getElementById('blogGrid');
                blogGrid.innerHTML = '<div class="loading-posts"><i class="fas fa-spinner fa-spin"></i><p>Loading blog posts...</p></div>';

                console.log('🔍 Fetching posts from Contentful...');

                // Fetch posts from Contentful
                const response = await client.getEntries({
                    content_type: 'post',
                    'fields.website': 'vendsmart',
                    order: '-sys.createdAt',
                    limit: 12
                });

                console.log('📦 Contentful response:', response);
                console.log('📊 Number of posts found:', response.items.length);

                const posts = response.items;
                
                if (posts.length === 0) {
                    console.log('❌ No Contentful posts found - showing sample posts...');
                    showSamplePosts();
                    return;
                }

                console.log('✅ Posts found! First post:', posts[0]);
                console.log('🏷️ Categories found:', posts.map(p => p.fields.category));

                // Update total posts count
                const totalPostsElement = document.getElementById('totalPosts');
                if (totalPostsElement) {
                    totalPostsElement.textContent = posts.length + '+';
                }

                // Set featured post (first post)
                if (posts.length > 0) {
                    console.log('⭐ Setting featured post...');
                    const featuredPost = createFeaturedPostHTML(posts[0]);
                    console.log('🎯 Featured post data:', featuredPost);
                    
                    document.getElementById('featuredImage').src = featuredPost.image;
                    document.getElementById('featuredImage').alt = featuredPost.title;
                    document.getElementById('featuredCategory').textContent = featuredPost.category;
                    document.getElementById('featuredDate').textContent = featuredPost.date;
                    document.getElementById('featuredReadTime').textContent = featuredPost.readTime;
                    document.getElementById('featuredTitle').textContent = featuredPost.title;
                    document.getElementById('featuredExcerpt').textContent = featuredPost.excerpt;
                    document.getElementById('featuredLink').href = `blog-post.html?id=${featuredPost.id}`;
                    document.getElementById('featuredPost').style.display = 'grid';
                    console.log('✅ Featured post set!');
                }

                // Populate blog grid (skip first post as it's featured)
                const regularPosts = posts.slice(1);
                console.log('📝 Regular posts to display:', regularPosts.length);
                
                let blogGridHTML = '';
                
                regularPosts.forEach(post => {
                    const postHTML = createBlogPostHTML(post);
                    blogGridHTML += postHTML;
                    console.log('📄 Created HTML for post:', post.fields.title);
                });

                console.log('🎨 Setting blog grid HTML...');
                blogGrid.innerHTML = blogGridHTML;
                console.log('✅ Blog grid updated!');

                // Populate categories
                const categories = [...new Set(posts.map(post => post.fields.category).filter(Boolean))];
                const categoryFilters = document.getElementById('categoryFilters');
                
                categories.forEach(category => {
                    const button = document.createElement('button');
                    button.className = 'category-btn';
                    button.setAttribute('data-category', category.toLowerCase().replace(/\s+/g, '-'));
                    button.textContent = category;
                    categoryFilters.appendChild(button);
                });

                // Show load more button if there are more posts
                if (posts.length >= 12) {
                    document.getElementById('loadMoreContainer').style.display = 'block';
                }

                // Reinitialize blog functionality
                initializeBlogFunctionality();
                
                // Call additional blog functions
                if (window.observeBlogPosts) {
                    window.observeBlogPosts();
                }
                if (window.addReadingTimeToPosts) {
                    window.addReadingTimeToPosts();
                }

            } catch (error) {
                console.error('Error loading blog posts:', error);
                document.getElementById('blogGrid').innerHTML = '<div class="error-posts"><p>Error loading blog posts. Please try again later.</p></div>';
            }
        }

        // Initialize blog functionality after Contentful loads
        function initializeBlogFunctionality() {
            // Category filtering
            const categoryButtons = document.querySelectorAll('.category-btn');
            const blogPosts = document.querySelectorAll('.blog-post');
            
            categoryButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const selectedCategory = this.getAttribute('data-category');
                    
                    // Update active button
                    categoryButtons.forEach(btn => btn.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Filter posts
                    blogPosts.forEach(post => {
                        const postCategory = post.getAttribute('data-category');
                        
                        if (selectedCategory === 'all' || postCategory === selectedCategory) {
                            post.style.display = 'block';
                            post.classList.remove('hidden');
                            post.style.animation = 'none';
                            post.offsetHeight;
                            post.style.animation = 'fadeInUp 0.6s ease forwards';
                        } else {
                            post.classList.add('fade-out');
                            setTimeout(() => {
                                post.style.display = 'none';
                                post.classList.add('hidden');
                            }, 300);
                        }
                    });
                });
            });

            // Newsletter form
            const newsletterForm = document.getElementById('newsletterForm');
            if (newsletterForm) {
                newsletterForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    
                    const emailInput = this.querySelector('input[type="email"]');
                    const email = emailInput.value;
                    
                    if (email) {
                        const button = this.querySelector('button');
                        const originalText = button.innerHTML;
                        
                        button.innerHTML = '<i class="fas fa-check"></i> Subscribed!';
                        button.style.background = '#10B981';
                        
                        emailInput.value = '';
                        
                        setTimeout(() => {
                            button.innerHTML = originalText;
                            button.style.background = '#1f2937';
                        }, 3000);
                    }
                });
            }
        }

        // Sample posts data for fallback
        const samplePosts = [
            {
                id: 'iot-integration-vending-cloud',
                category: 'Technology',
                image: 'https://images.unsplash.com/photo-1558618666-fcd25c85cd64?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80',
                title: 'IoT Integration: Connecting Your Vending Machines to the Cloud',
                excerpt: 'Learn how IoT technology is enabling real-time monitoring and predictive maintenance for vending operations.',
                date: 'November 28, 2024',
                readTime: '8 min read'
            },
            {
                id: 'customer-analytics-vending-performance',
                category: 'Business Tips',
                image: 'https://images.unsplash.com/photo-1556742049-0cfed4f6a45d?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80',
                title: 'Customer Analytics: Understanding Your Vending Machine Performance',
                excerpt: 'Discover how data analytics can help you optimize your vending machine inventory and increase sales.',
                date: 'November 25, 2024',
                readTime: '6 min read'
            },
            {
                id: 'plant-based-options-vending-trend',
                category: 'Health & Wellness',
                image: 'https://images.unsplash.com/photo-1490645935967-10de6ba17061?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80',
                title: 'Plant-Based Options: The Growing Trend in Vending',
                excerpt: 'Explore the rise of plant-based and vegan options in vending machines and how to meet this demand.',
                date: 'November 22, 2024',
                readTime: '5 min read'
            },
            {
                id: 'preventive-maintenance-vending-care',
                category: 'Maintenance',
                image: 'https://images.unsplash.com/photo-1581094794329-c8112a89af12?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80',
                title: 'Preventive Maintenance: Saving Money Through Proactive Care',
                excerpt: 'A detailed guide to implementing a preventive maintenance schedule that saves money and prevents downtime.',
                date: 'November 20, 2024',
                readTime: '7 min read'
            },
            {
                id: 'sustainability-vending-eco-friendly',
                category: 'Industry News',
                image: 'https://images.unsplash.com/photo-1556742049-0cfed4f6a45d?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80',
                title: 'Sustainability in Vending: Eco-Friendly Practices and Products',
                excerpt: 'How to make your vending business more sustainable and appeal to environmentally conscious consumers.',
                date: 'November 18, 2024',
                readTime: '6 min read'
            },
            {
                id: 'mobile-apps-vending-customer-experience',
                category: 'Technology',
                image: 'https://images.unsplash.com/photo-1558618666-fcd25c85cd64?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80',
                title: 'Mobile Apps and Vending: Enhancing Customer Experience',
                excerpt: 'How mobile applications are transforming the way customers interact with vending machines.',
                date: 'November 15, 2024',
                readTime: '5 min read'
            }
        ];

        // Show sample posts when no Contentful posts are available
        function showSamplePosts() {
            const blogGrid = document.getElementById('blogGrid');
            let blogGridHTML = '';
            
            // Set featured post (first sample post)
            const featuredPost = samplePosts[0];
            document.getElementById('featuredImage').src = featuredPost.image;
            document.getElementById('featuredImage').alt = featuredPost.title;
            document.getElementById('featuredCategory').textContent = featuredPost.category;
            document.getElementById('featuredDate').textContent = featuredPost.date;
            document.getElementById('featuredReadTime').textContent = featuredPost.readTime;
            document.getElementById('featuredTitle').textContent = featuredPost.title;
            document.getElementById('featuredExcerpt').textContent = featuredPost.excerpt;
            document.getElementById('featuredLink').href = `blog-post.html?id=${featuredPost.id}`;
            document.getElementById('featuredPost').style.display = 'grid';
            
            // Create regular posts (skip first as it's featured)
            const regularPosts = samplePosts.slice(1);
            regularPosts.forEach(post => {
                blogGridHTML += `
                    <article class="blog-post" data-category="${post.category.toLowerCase().replace(/\s+/g, '-')}">
                        <div class="post-image">
                            <img src="${post.image}" alt="${post.title}">
                        </div>
                        <div class="post-content">
                            <div class="post-meta">
                                <span class="category">${post.category}</span>
                                <span class="date">${post.date}</span>
                                <span class="read-time">${post.readTime}</span>
                            </div>
                            <h3>${post.title}</h3>
                            <p>${post.excerpt}</p>
                            <a href="blog-post.html?id=${post.id}" class="read-more">Read More <i class="fas fa-arrow-right"></i></a>
                        </div>
                    </article>
                `;
            });
            
            blogGrid.innerHTML = blogGridHTML;
            
            // Update total posts count
            const totalPostsElement = document.getElementById('totalPosts');
            if (totalPostsElement) {
                totalPostsElement.textContent = samplePosts.length + '+';
            }
            
            // Populate categories
            const categories = [...new Set(samplePosts.map(post => post.category))];
            const categoryFilters = document.getElementById('categoryFilters');
            
            categories.forEach(category => {
                const button = document.createElement('button');
                button.className = 'category-btn';
                button.setAttribute('data-category', category.toLowerCase().replace(/\s+/g, '-'));
                button.textContent = category;
                categoryFilters.appendChild(button);
            });
            
            // Initialize blog functionality
            initializeBlogFunctionality();
            
            // Call additional blog functions
            if (window.observeBlogPosts) {
                window.observeBlogPosts();
            }
            if (window.addReadingTimeToPosts) {
                window.addReadingTimeToPosts();
            }
        }

        // Load posts when page loads
        document.addEventListener('DOMContentLoaded', function() {
            loadBlogPosts();
        });
    </script>
</body>
</html> 